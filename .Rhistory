yintercept = 0,
linetype = 2,
color = text,
alpha = 0.5
) +
geom_line(aes(group = name),
size = 1.5
) +
scale_x_continuous(
expand = c(0, 0),
limits = c(7, weeks_in_office * 7),
breaks = seq(7, weeks_in_office * 7, by = 7),
labels = c(1:8)
) +
scale_y_continuous(
breaks = scales::pretty_breaks(10),
# limits = c(-300, 150)
) +
theme(legend.position = "none") +
labs(
x = "Weeks since taking office",
y = "Change in S&P 500 since taking office",
color = "",
title = "S&P 500 falls hardest under Trump's first 8 weeks\ncompared to other recent presidents"
) +
scale_color_continuous_diverging(
palette = "Blue-Red",
l1 = 20, l2 = 90,
p1 = 1, p2 = 1,
alpha = 1
)
p1 +
geom_label_repel(data=pres_labels_end,
aes(x=days_from_start,
y=mean_change,
label=name)
)
ggsave('preview-image.png', p1_labels,
units='cm',
width=20,
height = 10)
p1 <- from_start_first_8_weeks %>%
ggplot(aes(
x = days_from_start,
y = mean_change,
color = time_party,
group = name
)) +
geom_hline(
yintercept = 0,
linetype = 2,
color = text,
alpha = 0.5
) +
geom_line(aes(group = name),
size = 1.5
) +
scale_x_continuous(
expand = c(0, 0),
limits = c(7, weeks_in_office * 7),
breaks = seq(7, weeks_in_office * 7, by = 7),
labels = c(1:8)
) +
scale_y_continuous(
breaks = scales::pretty_breaks(10),
# limits = c(-300, 150)
) +
theme(legend.position = "none") +
labs(
x = "Weeks since taking office",
y = "Change in S&P 500 since taking office",
color = "",
title = "S&P 500 falls hardest under Trump's first 8 weeks\ncompared to other recent presidents"
) +
scale_color_continuous_diverging(
palette = "Blue-Red",
l1 = 20, l2 = 90,
p1 = 1, p2 = 1,
alpha = 1
)
p1_labels
p1 <- from_start_first_8_weeks %>%
ggplot(aes(
x = days_from_start,
y = mean_change,
color = time_party,
group = name
)) +
geom_hline(
yintercept = 0,
linetype = 2,
color = text,
alpha = 0.5
) +
geom_line(aes(group = name),
size = 1.5
) +
scale_x_continuous(
expand = c(0, 0),
limits = c(7, weeks_in_office * 7),
breaks = seq(7, weeks_in_office * 7, by = 7),
labels = c(1:8)
) +
scale_y_continuous(
breaks = scales::pretty_breaks(10),
# limits = c(-300, 150)
) +
theme(legend.position = "none") +
labs(
x = "Weeks since taking office",
y = "Change in S&P 500 since taking office",
color = "",
title = "S&P 500 falls hardest under Trump's first 8 weeks\ncompared to other recent presidents"
) +
scale_color_continuous_diverging(
palette = "Blue-Red",
l1 = 20, l2 = 90,
p1 = 1, p2 = 1,
alpha = 1
)
p1_labels <- p1 +
geom_label_repel(data=pres_labels_end,
aes(x=days_from_start,
y=mean_change,
label=name)
)
p1_labels
ggsave('preview-image.png', p1_labels,
units='cm',
width=20,
height = 10)
ggsave('preview-image.png', p1_labels,
units='cm',
width = 20,
height = 15)
ggsave('preview-image.png', p1_labels,
units='cm',
width = 30,
height = 15)
ggsave('preview-image.png', p1_labels,
units='cm',
width = 25,
height = 15)
renv::repair()
renv::status()
#| code-summary: plot code
#| label: fig-snp-over-time
#| fig-cap: S&P 500 since 1980 to today (natural log scale used to improve readabilty)
#| fig-width: 20
#| fig-height: 15
# label dataset
pres_labels <- recent_pres %>%
group_by(name, start_of_term, time_party) %>%
arrange(name, start_of_term) %>%
summarize(y.position = first(GSPC.Close))
# Figure
snp_over_time <- recent_pres %>%
ggplot(aes(
x = date,
y = log(GSPC.Close),
color = time_party,
group = name
)) +
geom_line(linewidth = 1.5) +
scale_x_date( # expand=c(0, 0),
date_breaks = "4 years",
date_labels = "%Y"
) +
scale_y_continuous(
breaks = scales::pretty_breaks(10),
# limits = c(-300, 150)
) +
theme(legend.position = "none") +
labs(
x = "",
y = "S&P 500 at closing\n(natural log scaled)",
color = "",
title = "S&P 500 since 1980"
) +
scale_color_continuous_diverging(
palette = "Blue-Red",
l1 = 20, l2 = 90,
p1 = 1, p2 = 1,
alpha = 1
) +
geom_label_repel(
data = pres_labels,
aes(
x = start_of_term,
y = log(y.position),
label = name,
color = time_party
),
nudge_y = .75,
max.overlaps = 10
)
snp_over_time
#| code-summary: plot code
#| label: fig-snp-over-time
#| fig-cap: S&P 500 since 1980 to today (natural log scale used to improve readabilty)
#| fig-width: 10
#| fig-height: 7
# label dataset
pres_labels <- recent_pres %>%
group_by(name, start_of_term, time_party) %>%
arrange(name, start_of_term) %>%
summarize(y.position = first(GSPC.Close))
# Figure
snp_over_time <- recent_pres %>%
ggplot(aes(
x = date,
y = log(GSPC.Close),
color = time_party,
group = name
)) +
geom_line(linewidth = 1.5) +
scale_x_date( # expand=c(0, 0),
date_breaks = "4 years",
date_labels = "%Y"
) +
scale_y_continuous(
breaks = scales::pretty_breaks(10),
# limits = c(-300, 150)
) +
theme(legend.position = "none") +
labs(
x = "",
y = "S&P 500 at closing\n(natural log scaled)",
color = "",
title = "S&P 500 since 1980"
) +
scale_color_continuous_diverging(
palette = "Blue-Red",
l1 = 20, l2 = 90,
p1 = 1, p2 = 1,
alpha = 1
) +
geom_label_repel(
data = pres_labels,
aes(
x = start_of_term,
y = log(y.position),
label = name,
color = time_party
),
nudge_y = .75,
max.overlaps = 10
)
snp_over_time
#| code-summary: plot code
#| label: fig-snp-over-time
#| fig-cap: S&P 500 since 1980 to today (natural log scale used to improve readabilty)
#| fig-width: 10
#| fig-height: 6
# label dataset
pres_labels <- recent_pres %>%
group_by(name, start_of_term, time_party) %>%
arrange(name, start_of_term) %>%
summarize(y.position = first(GSPC.Close))
# Figure
snp_over_time <- recent_pres %>%
ggplot(aes(
x = date,
y = log(GSPC.Close),
color = time_party,
group = name
)) +
geom_line(linewidth = 1.5) +
scale_x_date( # expand=c(0, 0),
date_breaks = "4 years",
date_labels = "%Y"
) +
scale_y_continuous(
breaks = scales::pretty_breaks(10),
# limits = c(-300, 150)
) +
theme(legend.position = "none") +
labs(
x = "",
y = "S&P 500 at closing\n(natural log scaled)",
color = "",
title = "S&P 500 since 1980"
) +
scale_color_continuous_diverging(
palette = "Blue-Red",
l1 = 20, l2 = 90,
p1 = 1, p2 = 1,
alpha = 1
) +
geom_label_repel(
data = pres_labels,
aes(
x = start_of_term,
y = log(y.position),
label = name,
color = time_party
),
nudge_y = .75,
max.overlaps = 10
)
snp_over_time
ggsave("snp-over-time.png", snp_over_time,
units = "cm",
height = 15,
width = 30
)
ggsave("snp-over-time.png", snp_over_time,
units = "cm",
height = 30*.7,
width = 30
)
ggsave("snp-over-time.png", snp_over_time,
units = "cm",
height = 30*.6,
width = 30
)
#| code-summary: plot code
#| label: fig-snp-over-time
#| fig-cap: S&P 500 since 1980 to today (natural log scale used to improve readabilty)
#| fig-width: 10
#| fig-height: 6
# label dataset
pres_labels <- recent_pres %>%
group_by(name, start_of_term, time_party) %>%
arrange(name, start_of_term) %>%
summarize(y.position = first(GSPC.Close))
# Figure
snp_over_time <- recent_pres %>%
ggplot(aes(
x = date,
y = log(GSPC.Close),
color = time_party,
group = name
)) +
geom_line(linewidth = 1.5) +
scale_x_date( # expand=c(0, 0),
date_breaks = "4 years",
date_labels = "%Y"
) +
scale_y_continuous(
breaks = scales::pretty_breaks(10),
# limits = c(-300, 150)
) +
theme(legend.position = "none") +
labs(
x = "",
y = "S&P 500 at closing\n(natural log scaled)",
color = "",
title = "S&P 500 since 1980"
) +
scale_color_continuous_diverging(
palette = "Blue-Red",
l1 = 20, l2 = 90,
p1 = 1, p2 = 1,
alpha = 1
) +
geom_label_repel(
data = pres_labels,
aes(
x = start_of_term,
y = log(y.position),
label = name,
color = time_party
),
nudge_y = .75,
max.overlaps = 10
)
snp_over_time
p1 <- from_start_first_8_weeks %>%
ggplot(aes(
x = days_from_start,
y = mean_change,
color = time_party,
group = name
)) +
geom_hline(
yintercept = 0,
linetype = 2,
color = text,
alpha = 0.5
) +
geom_line(aes(group = name),
size = 1.5
) +
scale_x_continuous(
expand = c(0, 0),
limits = c(7, weeks_in_office * 7),
breaks = seq(7, weeks_in_office * 7, by = 7),
labels = c(1:8)
) +
scale_y_continuous(
breaks = scales::pretty_breaks(10),
# limits = c(-300, 150)
) +
theme(legend.position = "none") +
labs(
x = "Weeks since taking office",
y = "Change in S&P 500 since taking office",
color = "",
title = "S&P 500 during first 8 weeks of recent presidents"
) +
scale_color_continuous_diverging(
palette = "Blue-Red",
l1 = 20, l2 = 90,
p1 = 1, p2 = 1,
alpha = 1
)
p1_labels <- p1 +
geom_label_repel(data=pres_labels_end,
aes(x=days_from_start,
y=mean_change,
label=name)
)
p1_labels
ggsave('preview-image.png', p1_labels,
units='cm',
width = 25,
height = 15)
renv::status()
renv::repair()
renv::status()
renv::snapshot()
renv::restore()
renv::repaire()
renv::repair()
renv::clean()
#| code-summary: Libraries & themes
library(tidyverse)
library(quantmod)
library(patchwork)
library(data.table)
library(colorspace)
library(ggrepel)
library(gganimate)
library(gifski)
install.packages('gifski')
#| code-summary: Libraries & themes
library(tidyverse)
library(quantmod)
library(patchwork)
library(data.table)
library(colorspace)
library(ggrepel)
library(gganimate)
library(gifski)
# Remove the cached version
remove.packages("gifski")
# Clear renv cache (if using `renv` for package management)
renv::clean()
# Reinstall gifski
install.packages("gifski"
)
library(gifski)
renv::restore()
library(figski)
library(gifski)
renv::repair()
install.packages("gifski", repos = "https://cran.r-project.org")
renv::status()
renv::status()
renv::status()
renv::snapshot()
library(Av)
library(a)
library(av)
renv::status()
renv::snapshot()
p1 <- from_start_first_8_weeks %>%
ggplot(aes(
x = days_from_start,
y = mean_change,
color = time_party,
group = name
)) +
geom_hline(
yintercept = 0,
linetype = 2,
color = text,
alpha = 0.5
) +
geom_line(aes(group = name),
size = 1.5
) +
scale_x_continuous(
expand = c(0, 0),
limits = c(7, weeks_in_office * 7),
breaks = seq(7, weeks_in_office * 7, by = 7),
labels = c(1:8)
) +
scale_y_continuous(
breaks = scales::pretty_breaks(10),
# limits = c(-300, 150)
) +
theme(legend.position = "none") +
labs(
x = "Weeks since taking office",
y = "Change in S&P 500 since taking office",
color = "",
title = "S&P 500 during first 8 weeks of recent presidential terms"
) +
scale_color_continuous_diverging(
palette = "Blue-Red",
l1 = 20, l2 = 90,
p1 = 1, p2 = 1,
alpha = 1
)
p1_labels <- p1 +
geom_label_repel(data=pres_labels_end,
aes(x=days_from_start,
y=mean_change,
label=name)
)
